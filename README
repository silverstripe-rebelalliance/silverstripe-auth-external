###############################################
External Authentication Module
###############################################

Maintainer Contact
-----------------------------------------------
Roel Gloudemans (Nickname: lancer)
roel@quantumfluctuations.nl or roel@gloudemans.info

Contibutors
-----------------------------------------------
Sander van Dragt (Nickname: svandragt)
sander.vandragt@gmail.com


Requirements
-----------------------------------------------
* Silverstripe 3.0.0 or later
* Some PHP modules depending on the driver used like php-imap, php-ldap or
  some specific PEAR and/or PECL modules. The module requirements are 
  documented in the configuration template for that module (see doc directory)


Documentation
-----------------------------------------------
http://doc.silverstripe.com/doku.php?id=modules:external-authentication


Installation Instructions
-----------------------------------------------
* Copy the auth_external directory into your main SilverStripe directory
* Create a proper _config.php file in your auth_external directory. You 
  can start with the annotated examples from the doc directory
* run /dev/build  (like http://www.yourdomain.com/dev/build)

You should now have an "External Account" tab on the admin page.

If things didn't work as expected, enable the debugging in the config file.
The resulting log should point out the configuration mistakes.

Next to the divers included in the official release, some (user maintained)
drivers may be available by visiting the documentation link above.


Usage Overview
-----------------------------------------------
This module enables you to use external authentication sources for password
verification. At the moment this module has 4 drivers. LDAP, FTP, IMAP and
HTTPBASIC. The IMAP driver also supports POP3. All drivers support SSL. TLS
is only supported by the LDAP and IMAP drivers.

When you use this module you will still need to create accounts within
SilverStripe. There will be two extra fields for each account, specifying the
username and the external authentication source it comes from.

If you run your website at your ISP which also hosts your mailbox, you can use
the ISP's IMAP/POP3 server to validate your logon. Other users at the ISP
cannot login when you do that because the accounts also need to be registered
within SilverStripe.

Password Reset
-----------------------------------------------
A experimental password reset has been added which has only been tested with active directory so far.
It adds a forgotten password link similar to the standard Silverstripe forgotten password functionality.
To add validation to see if a password is strong enough create a data extension class with the function
checkPasswordValid which checks the password and returns null if it is valid or the error message if it
invalid as per the example below as per the example below

<?php

class AuthPasswordValid extends DataExtension {
	public function checkPasswordValid($password) {
		if(!preg_match('/^(([a-zA-Z]+\d+)|(\d+[a-zA-Z]+))[a-zA-Z0-9]*$/',$password)) {
			return (string)'Passwords must have at least one digit and one alphanumeric character';
		}
		return null;
	}
}


Object::add_extension('AuthPasswordReset', 'YourPasswordValidationClass');


Known issues
-----------------------------------------------
none
